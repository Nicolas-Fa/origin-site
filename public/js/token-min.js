import{CLIENT_ID,CLIENT_SECRET}from"./vars.js";export async function fetchCharacterInfo(e,a){const r=await fetch("https://oauth.battle.net/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:`grant_type=client_credentials&client_id=${CLIENT_ID}&client_secret=${CLIENT_SECRET}`});if(r.ok){var t=(await r.json()).access_token;const o=await fetch(`https://eu.api.blizzard.com/profile/wow/character/${e}/${a}/character-media?namespace=profile-eu&locale=fr_FR&${t}`,{headers:{Authorization:`Bearer ${t}`}}),c=await fetch(`https://eu.api.blizzard.com/profile/wow/character/${e}/${a}/appearance?namespace=profile-eu&locale=fr_FR&${t}`,{headers:{Authorization:`Bearer ${t}`}});if(!c.ok)throw new Error(`Erreur API : ${c.status}`);if(!o.ok)throw new Error(`Erreur API : ${o.status}`);return{character:await c.json(),media:await o.json()}}}